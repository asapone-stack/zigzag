<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Zigzag</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="attached_assets/image_1763569221576.png">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <a href="index.html">
                        <img src="attached_assets/image_1763569221576.png" alt="Zigzag Logo" class="logo-img">
                    </a>
                </div>
                <ul class="nav-links">
                    <li><a href="index.html#how-it-works">Comment ça marche</a></li>
                    <li><a href="index.html#features">Expérience unique</a></li>
                    <li><a href="index.html#gallery">Galerie</a></li>
                    <li><a href="index.html#play" class="btn-nav">Jouer maintenant</a></li>
                </ul>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <main>
        <section class="hero" style="padding: 140px 0 60px !important;">
            <div class="container">
                <h1>Contacter l’équipe ZigZag</h1>
                <p class="hero-subtitle">Une question, une idée de partenariat ou juste envie de nous dire bonjour ? Vous pouvez remplir ce formulaire !</p>

                <div class="contact-card">
                    <form id="contact-form" class="newsletter-form" style="flex-direction: column; align-items: stretch; gap: 16px; margin-top: 0;">
                        <div style="display: flex; flex-direction: row; gap: 12px; flex-wrap: wrap;">
                            <input
                                type="text"
                                id="contact-firstname"
                                class="newsletter-input"
                                placeholder="Prénom"
                                required
                                style="flex: 1;"
                            >
                            <input
                                type="text"
                                id="contact-lastname"
                                class="newsletter-input"
                                placeholder="Nom"
                                required
                                style="flex: 1;"
                            >
                        </div>

                        <input
                            type="email"
                            id="contact-email"
                            class="newsletter-input"
                            placeholder="Votre email"
                            required
                        >

                        <textarea
                            id="contact-message"
                            class="newsletter-input"
                            placeholder="Votre demande"
                            rows="5"
                            required
                            style="border-radius: 24px; resize: vertical;"
                        ></textarea>

                        <button type="submit" class="newsletter-btn" style="align-self: flex-start;">
                            Envoyer mon message
                        </button>
                    </form>
                    <p id="contact-feedback" class="newsletter-message" style="margin-top: 12px;"></p>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-links">
                    <a href="contact.html">Contact</a>
                    <a href="presse.html">Presse</a>
                    <a href="mentions-legales.html">Mentions Légales</a>
                </div>
                <div class="social-links">
                    <a href="https://x.com/alexis_sapone?s=11" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/zigzag.fun/" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="2" y="2" width="20" height="20" rx="5" ry="5"/>
                            <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/>
                            <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"/>
                        </svg>
                    </a>
                    <a href="https://www.tiktok.com/@zigzag.fun" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/>
                        </svg>
                    </a>
                </div>
            </div>
        <div class="footer-copyright">
            <p>© 2025 ZigZag. Tous droits réservés.</p>
        </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script>
        // Configuration Supabase (même projet que la home)
        const SUPABASE_URL = "https://tihrltssmpxpreadpzqm.supabase.co";
        const SUPABASE_ANON_KEY =
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpaHJsdHNzbXB4cHJlYWRwenFtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxNjEwNDksImV4cCI6MjA3OTczNzA0OX0.lXbPKA8tYj7o582onzj8c9y1vhkdXrk5SN8WmIahJpY";

        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Formulaire de contact → insertion dans la table contact_messages
        const contactForm = document.getElementById("contact-form");
        const contactFirstname = document.getElementById("contact-firstname");
        const contactLastname = document.getElementById("contact-lastname");
        const contactEmail = document.getElementById("contact-email");
        const contactMessage = document.getElementById("contact-message");
        const contactFeedback = document.getElementById("contact-feedback");

        if (contactForm && contactFirstname && contactLastname && contactEmail && contactMessage && contactFeedback) {
            contactForm.addEventListener("submit", async (event) => {
                event.preventDefault();

                const first = contactFirstname.value.trim();
                const last = contactLastname.value.trim();
                const email = contactEmail.value.trim();
                const message = contactMessage.value.trim();

                if (!first || !last || !email || !message) {
                    contactFeedback.textContent = "Merci de compléter tous les champs.";
                    return;
                }

                contactFeedback.textContent = "Envoi en cours...";

                // Lazy‑create un conteneur global de toasts
                function showToast(message) {
                    console.log("TOAST CONTACT", message);
                    let container = document.querySelector(".toast-container");
                    if (!container) {
                        container = document.createElement("div");
                        container.className = "toast-container";
                        document.body.appendChild(container);
                    }

                    const toast = document.createElement("div");
                    toast.className = "toast";
                    toast.innerHTML = `
                        <div class="toast-success-accent"></div>
                        <div>
                            <strong>Message envoyé</strong><br>
                            <span>${message}</span>
                        </div>
                    `;
                    container.appendChild(toast);

                    // Retirer le toast après l’animation (≈3,5 s)
                    setTimeout(() => {
                        toast.remove();
                        if (!container.hasChildNodes()) {
                            container.remove();
                        }
                    }, 3600);
                }

                try {
                    const { error } = await supabaseClient
                        .from("contact_messages")
                        .insert({
                            first_name: first,
                            last_name: last,
                            email,
                            message
                        });

                    if (error) {
                        console.error(error);
                        contactFeedback.textContent = "Une erreur est survenue. Merci de réessayer.";
                        return;
                    }

                    contactForm.reset();
                    contactFeedback.textContent = "";
                    showToast("Merci ! Votre message a bien été envoyé.");
                } catch (err) {
                    console.error(err);
                    contactFeedback.textContent = "Une erreur inattendue est survenue.";
                }
            });
        }

    </script>
</body>
</html>


